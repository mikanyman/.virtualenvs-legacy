
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <META NAME="ROBOTS" CONTENT="NONE">
      <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
      <title>Rockart</title>
      <link href="{{ STATIC_URL }}css/styles.css" rel="stylesheet" type="text/css" />
      <link rel="stylesheet" href="{{ STATIC_URL }}css/lightbox.css" type="text/css" media="screen" title="tyyli" />

      <!-- Lightbox -->
      <script src="{{ STATIC_URL }}js/prototype.js" type="text/javascript"></script>
      <script src="{{ STATIC_URL }}js/scriptaculous.js?load=effects,builder" type="text/javascript"></script>
      <script src="{{ STATIC_URL }}js/lightbox.js" type="text/javascript"></script>
      
      <!--Google Maps -->
      <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
      <script>
	    var map;
	    var marker;
	    var waypointByID = {};
	
	    {% if page_name == "index" %}
	    function initialize() {
	        if (document.getElementById("map_canvas")) { 
	            map = new google.maps.Map(document.getElementById('map_canvas'), {
	                zoom: 5,
	                center: new google.maps.LatLng(65.379535, 21.0),
	                mapTypeId: google.maps.MapTypeId.ROADMAP
	            }); 	    
	            <!-- Create waypoint marker overlay //-->
	            {% for waypoint in waypoints %}            
	                var waypoint = waypointByID[{{waypoint.id}}] = {
	                    title: "{{waypoint.name}}",
	                    lat: {{waypoint.geometry.y}},
	                    lng: {{waypoint.geometry.x}}
	                };
	                var markerLatLng = new google.maps.LatLng(waypoint.lat, waypoint.lng);
	                marker = new google.maps.Marker({map: map, position: markerLatLng});
	                var infowindow = new google.maps.InfoWindow();
		    
		        google.maps.event.addListener(marker, 'click', function() {
                            infowindow.setContent("<a href=/rock-art/search/?id={{waypoint.id}}><b>"+waypoint.title+"</b></a><br/><br/>"
		                                   +"<p>{{waypoint.place}}</p><br/><br/>"
						   +"<p>{{waypoint.description}}</p>");
                            infowindow.open(map, marker);
		        });       
		    {% endfor %}
	        }  
	    }
	    {% endif %}
	    {% if page_name == "show_item" %}
	    function initialize() {
	        if (document.getElementById("mapCanvas")) { 
	            map = new google.maps.Map(document.getElementById('mapCanvas'), {
	                zoom: 11,
	                center: new google.maps.LatLng({{ results.geometry.y }}, {{ results.geometry.x }}),
	                mapTypeId: google.maps.MapTypeId.ROADMAP
	            }); 	    
	            <!-- Create waypoint marker overlay //-->
	            waypointByID[{{results.id}}] = {
	                title: "{{results.name}}",
	                lat: {{results.geometry.y}},
	                lng: {{results.geometry.x}}
	            };
	            var waypoint = waypointByID[{{results.id}}];
	            var markerLatLng = new google.maps.LatLng(waypoint.lat, waypoint.lng);
	            marker = new google.maps.Marker({map: map, position: markerLatLng});
	            //var infowindow = new google.maps.InfoWindow();
		    }  
		    }
	    {% endif %}
	    
    </script>
    </head>
    
    <body onload='initialize()'>
      <div class="container">
	
	<div class="navi">
	  <table class="navi_table">
	    <tr>
	      
	      <td><a href="/rock-art/"> | Etusivulle | </a></td>	
	      <td class="navi_login"><a href="/rock-art/admin/"> | Kirjaudu | </a><a href="http://a199.myrootshell.com/rockart3/">| Suomen muinaistaideseura | </a></td>
	    </tr>
	  </table>
	</div>
	
	<div class="header">
	</div>

	{% if page_name == "index" %}
	<div class="map_index">
	  <div id="map_canvas" class="map_canvas"></div>
          {% block waypoints %}{% endblock %}
	</div>
	{% endif %}

	{% if page_name == "search" %}
	<div class="map_index">
	  {% block search %}{% endblock %}
	</div>
	{% endif %}

	{% if page_name == "search_all" %}
	<div class="map_index">
	  {% block search_all %}{% endblock %}
	</div>
	{% endif %}

	{% if page_name == "show_item" %}
	<div class="map_index">
	  {% block show_item %}{% endblock %}
	</div>
	{% endif %}
	
	<div class="index">
	  <table>
	      <form method="POST" action="/rock-art/search/">{% csrf_token %}
		<tr>
		  <td class="title"> Kohteen nimi: </td>
		  <td><input type="text" size="25" name="nimi"/></td>
		</tr>
		<tr>
		  <td class="title"> Paikkakunta: </td>
		  <td><input type="text" size="25" name="paikkakunta"/></td>
		</tr>
		<tr>
		  <td>&nbsp;</td>
		  <td><input type="submit" class="button" name="hae" value="Hae" /></td>
		</tr>
	      </form>

	      <form method="POST" action="/rock-art/show-all/">{% csrf_token %}
	      <tr>
		<td>&nbsp;</td>
		<td><input type="submit" name="listaus" class="button" value="Listaus kaikista kohteista"/></td>
	      </tr>
	    </form>
		 
	  </table>
	</div>
	  
	  
	<div class="footer">
	  <table class="footer_table">
	    <tr>
	      <td><img src="{{ STATIC_URL }}images/logo.jpg"/></td>
	      <td>Suomen muinaistaideseura ry</td>
	    </tr>
	  </table>
	</div>
      </div>
    </body>
  </html>
      

